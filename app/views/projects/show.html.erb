<%= content_for(:title) do %>
  Zentangle - <%= @project.title %>
<% end %>

<div class="container">
<h1><%= @project.title %> <-- Project name</h1>
  <div class="row">
    <div class="col-md-7 video">
      <div class="project-picture" style="background-image: linear-gradient(-225deg, rgba(0,101,168,0.45) 0%, rgba(0,36,61,0.45) 50%), url(<%= @project.picture %>); width: 100%; height: 300px;">
      </div>
    </div>
    <div class="col-md-5 panel-side">
      <div class="avatar" style="background-image: linear-gradient(-225deg, rgba(0,101,168,0.45) 0%, rgba(0,36,61,0.45) 50%), url( <%= @project.user.profile_picture %> );">avatar test</div>
      <%= link_to user_path(@project.user.id) do %>
        <h4><%= @project.user.first_name %> <%= @project.user.last_name %></h4>
        <% end %>
      <div class="info">
        <div class="title"><h3>About the Project</h3></div>
        <div class="description"><p><%= @project.short_description %></p></div>
      </div>
      <div class="timeline"></div>
    </div>
  </div>
</div>
<br><br><br>
<div class="container">
  <div class="row">
    <div class="col-md-4 lower-left">
      <div class="info">
        <div class="title"><h3>Collaborators</h3></div>
        <div class="collaborators">
          <% @team.each do |member| %>
            <%= link_to user_path(member) do  %>
              <%= image_tag(member.profile_picture) %>
            <% end %>
          <% end %>
        </div>
        <div class="title"><h3>Available Roles</h3></div>
        <div class="available-roles">
          <div class="roles-btns">
            <% @available_roles.each do |role| %>
              <!-- Trigger/Open The Modal -->
              <button class="role-btn" id = <%= role.id %>><%= role.title %></button>
            <% end %>
          </div>
        </div>
        <div class="title"><h3>Budget</h3></div>
        <div class="funding"><%= @project.total_budget %></div>
      </div>
    </div>
    <div class="col-md-8 lower-right">
      <p><%= @project.full_description %></p>
    </div>
  </div>
</div>

<div class="container">
  <div class="divs-for-modal">

    <!-- The Modal -->
    <div id="roles-modal" class="modal">

      <!-- Modal content -->
      <div class="modal-content">
        <span class="close">&times;</span>
        <div class="roles-modal-list">
          <% @project.roles.each do |role| %>
            <div class="role-modal-details" id = <%= "role-#{role.id}" %>>
              <h2>Role: <%= role.title %></h2>
              <p>Description: <%= role.description %></h3>
              <p>Requirements: <%= role.requirements %></p>
              <p>Compensation: <%= role.compensation %></p>
              <button class="btn btn-primary"> <%= link_to "Request to Join", new_role_request_path(role.id) %> </button>
            </div>
          <% end %>
        </div>
      </div>

    </div>
  </div>
</div>








<% content_for(:after_js) do %>
  <script>
    // Get the modal
    $(document).ready(function() {
      var modal = $('#roles-modal');
      // Get the button that opens the modal
      var btn = $(".role-btn");
      // Get the <span> element that closes the modal
      var span = $(".close");
      // When the user clicks the button, open the modal associated with that role

      btn.click(function(event) {
        var btnValForId = "#role-" + event.target.id;
        $(btnValForId).siblings().hide();
        modal.css({"display": "block"});
      });

      // When the user clicks on <span> (x), close the modal
      span.click(function() {
        modal.css({"display": "none"});
      });

      // When the user clicks anywhere outside of the modal, close it
      $(document).click(function(event) {
        if (event.target == modal[0]) {
          modal.css({"display": "none"});
        }
      });
    });

  </script>
<% end %>
